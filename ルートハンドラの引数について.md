// app/api/user/route.ts
import { NextRequest} from 'next/server';

✅ルートハンドラーの引数requestにはフロントエンドからNext.jsの開発サーバーに送信された情報やその情報を扱うための関数がオブジェクト形式で
開発サーバーから渡される。


例）requestの内部構造
// const request = {
//   url: "https://example.com/api",   // リクエストの URL
//   method: "GET",                     // HTTP メソッド
//   headers: {                         // ヘッダー情報
//     "Content-Type": "application/json",
//   },
//   json: async () => { /* JSONを取得する為の関数 */ },
// };



export async function POST(request: NextRequest) {
  // リクエストボディをJSONとして取得
  const data = await request.json(); 
  console.log(data); // { name: "Taro", age: 42 }
  return NextResponse.json({ message: 'データ受信成功'});
}



// client-side function
async function sendData() {
  const data = { name: "Taro", age: 42 };

　------------------------------------------------------
  const response = await fetch('/api/user', {  
    method: 'POST',                           
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
  });
  // これはデータをサーバーに送る 2．ルートハンドラーで返された結果を受け取るという 2つの処理を実行している
  -------------------------------------------------------

  const result = await response.json(); // レスポンスをJSONとして取得
  console.log(result);
}

sendData();
